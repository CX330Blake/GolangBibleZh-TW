<!DOCTYPE HTML>
<html lang="zh" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using https://github.com/wa-lang/wabook -->
        <meta charset="UTF-8">
        <title>sort.Interface接口 - Go語言聖經</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../static/wabook/css/variables.css">
        <link rel="stylesheet" href="../static/wabook/css/general.css">
        <link rel="stylesheet" href="../static/wabook/css/chrome.css">
        <link rel="stylesheet" href="../static/wabook/css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../static/wabook/FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../static/wabook/fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../static/wabook/highlight.css">
        <link rel="stylesheet" href="../static/wabook/tomorrow-night.css">
        <link rel="stylesheet" href="../static/wabook/ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('wabook-theme');
                var sidebar = localStorage.getItem('wabook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('wabook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('wabook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('wabook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('wabook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter">
  <li class="chapter-item expanded ">
    <a href="../index.html" >Go語言聖經</a>
  </li>
  <li class="chapter-item expanded ">
    <a href="../preface-zh.html" >譯者序</a>
  </li>
  <li class="chapter-item expanded ">
    <a href="../preface.html" >前言</a>
  </li>
  <li class="chapter-item expanded ">
    <a href="../ch1/ch1.html" ><strong aria-hidden="true">1.</strong> 入門</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch1/ch1-01.html" ><strong aria-hidden="true">1.1.</strong> Hello, World</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch1/ch1-02.html" ><strong aria-hidden="true">1.2.</strong> 命令行參數</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch1/ch1-03.html" ><strong aria-hidden="true">1.3.</strong> 查找重複的行</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch1/ch1-04.html" ><strong aria-hidden="true">1.4.</strong> GIF動畫</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch1/ch1-05.html" ><strong aria-hidden="true">1.5.</strong> 獲取URL</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch1/ch1-06.html" ><strong aria-hidden="true">1.6.</strong> 併發獲取多個URL</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch1/ch1-07.html" ><strong aria-hidden="true">1.7.</strong> Web服務</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch1/ch1-08.html" ><strong aria-hidden="true">1.8.</strong> 本章要點</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch2/ch2.html" ><strong aria-hidden="true">2.</strong> 程序結構</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch2/ch2-01.html" ><strong aria-hidden="true">2.1.</strong> 命名</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch2/ch2-02.html" ><strong aria-hidden="true">2.2.</strong> 聲明</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch2/ch2-03.html" ><strong aria-hidden="true">2.3.</strong> 變量</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch2/ch2-04.html" ><strong aria-hidden="true">2.4.</strong> 賦值</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch2/ch2-05.html" ><strong aria-hidden="true">2.5.</strong> 類型</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch2/ch2-06.html" ><strong aria-hidden="true">2.6.</strong> 包和文件</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch2/ch2-07.html" ><strong aria-hidden="true">2.7.</strong> 作用域</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch3/ch3.html" ><strong aria-hidden="true">3.</strong> 基礎數據類型</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch3/ch3-01.html" ><strong aria-hidden="true">3.1.</strong> 整型</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch3/ch3-02.html" ><strong aria-hidden="true">3.2.</strong> 浮點數</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch3/ch3-03.html" ><strong aria-hidden="true">3.3.</strong> 複數</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch3/ch3-04.html" ><strong aria-hidden="true">3.4.</strong> 布爾型</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch3/ch3-05.html" ><strong aria-hidden="true">3.5.</strong> 字符串</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch3/ch3-06.html" ><strong aria-hidden="true">3.6.</strong> 常量</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch4/ch4.html" ><strong aria-hidden="true">4.</strong> 複合數據類型</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch4/ch4-01.html" ><strong aria-hidden="true">4.1.</strong> 數組</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch4/ch4-02.html" ><strong aria-hidden="true">4.2.</strong> Slice</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch4/ch4-03.html" ><strong aria-hidden="true">4.3.</strong> Map</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch4/ch4-04.html" ><strong aria-hidden="true">4.4.</strong> 結構體</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch4/ch4-05.html" ><strong aria-hidden="true">4.5.</strong> JSON</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch4/ch4-06.html" ><strong aria-hidden="true">4.6.</strong> 文本和HTML模板</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch5/ch5.html" ><strong aria-hidden="true">5.</strong> 函數</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch5/ch5-01.html" ><strong aria-hidden="true">5.1.</strong> 函數聲明</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch5/ch5-02.html" ><strong aria-hidden="true">5.2.</strong> 遞歸</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch5/ch5-03.html" ><strong aria-hidden="true">5.3.</strong> 多返回值</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch5/ch5-04.html" ><strong aria-hidden="true">5.4.</strong> 錯誤</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch5/ch5-05.html" ><strong aria-hidden="true">5.5.</strong> 函數值</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch5/ch5-06.html" ><strong aria-hidden="true">5.6.</strong> 匿名函數</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch5/ch5-07.html" ><strong aria-hidden="true">5.7.</strong> 可變參數</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch5/ch5-08.html" ><strong aria-hidden="true">5.8.</strong> Deferred函數</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch5/ch5-09.html" ><strong aria-hidden="true">5.9.</strong> Panic異常</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch5/ch5-10.html" ><strong aria-hidden="true">5.10.</strong> Recover捕獲異常</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch6/ch6.html" ><strong aria-hidden="true">6.</strong> 方法</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch6/ch6-01.html" ><strong aria-hidden="true">6.1.</strong> 方法聲明</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch6/ch6-02.html" ><strong aria-hidden="true">6.2.</strong> 基於指針對象的方法</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch6/ch6-03.html" ><strong aria-hidden="true">6.3.</strong> 通過嵌入結構體來擴展類型</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch6/ch6-04.html" ><strong aria-hidden="true">6.4.</strong> 方法值和方法表達式</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch6/ch6-05.html" ><strong aria-hidden="true">6.5.</strong> 示例: Bit數組</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch6/ch6-06.html" ><strong aria-hidden="true">6.6.</strong> 封裝</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch7/ch7.html" ><strong aria-hidden="true">7.</strong> 接口</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-01.html" ><strong aria-hidden="true">7.1.</strong> 接口是合約</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-02.html" ><strong aria-hidden="true">7.2.</strong> 接口類型</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-03.html" ><strong aria-hidden="true">7.3.</strong> 實現接口的條件</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-04.html" ><strong aria-hidden="true">7.4.</strong> flag.Value接口</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-05.html" ><strong aria-hidden="true">7.5.</strong> 接口值</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-06.html" class="active"><strong aria-hidden="true">7.6.</strong> sort.Interface接口</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-07.html" ><strong aria-hidden="true">7.7.</strong> http.Handler接口</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-08.html" ><strong aria-hidden="true">7.8.</strong> error接口</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-09.html" ><strong aria-hidden="true">7.9.</strong> 示例: 表達式求值</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-10.html" ><strong aria-hidden="true">7.10.</strong> 類型斷言</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-11.html" ><strong aria-hidden="true">7.11.</strong> 基於類型斷言識別錯誤類型</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-12.html" ><strong aria-hidden="true">7.12.</strong> 通過類型斷言查詢接口</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-13.html" ><strong aria-hidden="true">7.13.</strong> 類型分支</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-14.html" ><strong aria-hidden="true">7.14.</strong> 示例: 基於標記的XML解碼</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch7/ch7-15.html" ><strong aria-hidden="true">7.15.</strong> 補充幾點</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch8/ch8.html" ><strong aria-hidden="true">8.</strong> Goroutines和Channels</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch8/ch8-01.html" ><strong aria-hidden="true">8.1.</strong> Goroutines</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch8/ch8-02.html" ><strong aria-hidden="true">8.2.</strong> 示例: 併發的Clock服務</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch8/ch8-03.html" ><strong aria-hidden="true">8.3.</strong> 示例: 併發的Echo服務</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch8/ch8-04.html" ><strong aria-hidden="true">8.4.</strong> Channels</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch8/ch8-05.html" ><strong aria-hidden="true">8.5.</strong> 併發的循環</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch8/ch8-06.html" ><strong aria-hidden="true">8.6.</strong> 示例: 併發的Web爬蟲</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch8/ch8-07.html" ><strong aria-hidden="true">8.7.</strong> 基於select的多路複用</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch8/ch8-08.html" ><strong aria-hidden="true">8.8.</strong> 示例: 併發的目錄遍歷</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch8/ch8-09.html" ><strong aria-hidden="true">8.9.</strong> 併發的退出</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch8/ch8-10.html" ><strong aria-hidden="true">8.10.</strong> 示例: 聊天服務</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch9/ch9.html" ><strong aria-hidden="true">9.</strong> 基於共享變量的併發</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch9/ch9-01.html" ><strong aria-hidden="true">9.1.</strong> 競爭條件</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch9/ch9-02.html" ><strong aria-hidden="true">9.2.</strong> sync.Mutex互斥鎖</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch9/ch9-03.html" ><strong aria-hidden="true">9.3.</strong> sync.RWMutex讀寫鎖</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch9/ch9-04.html" ><strong aria-hidden="true">9.4.</strong> 內存同步</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch9/ch9-05.html" ><strong aria-hidden="true">9.5.</strong> sync.Once惰性初始化</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch9/ch9-06.html" ><strong aria-hidden="true">9.6.</strong> 競爭條件檢測</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch9/ch9-07.html" ><strong aria-hidden="true">9.7.</strong> 示例: 併發的非阻塞緩存</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch9/ch9-08.html" ><strong aria-hidden="true">9.8.</strong> Goroutines和線程</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch10/ch10.html" ><strong aria-hidden="true">10.</strong> 包和工具</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch10/ch10-01.html" ><strong aria-hidden="true">10.1.</strong> 包簡介</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch10/ch10-02.html" ><strong aria-hidden="true">10.2.</strong> 導入路徑</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch10/ch10-03.html" ><strong aria-hidden="true">10.3.</strong> 包聲明</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch10/ch10-04.html" ><strong aria-hidden="true">10.4.</strong> 導入聲明</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch10/ch10-05.html" ><strong aria-hidden="true">10.5.</strong> 包的匿名導入</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch10/ch10-06.html" ><strong aria-hidden="true">10.6.</strong> 包和命名</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch10/ch10-07.html" ><strong aria-hidden="true">10.7.</strong> 工具</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch11/ch11.html" ><strong aria-hidden="true">11.</strong> 測試</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch11/ch11-01.html" ><strong aria-hidden="true">11.1.</strong> go test</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch11/ch11-02.html" ><strong aria-hidden="true">11.2.</strong> 測試函數</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch11/ch11-03.html" ><strong aria-hidden="true">11.3.</strong> 測試覆蓋率</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch11/ch11-04.html" ><strong aria-hidden="true">11.4.</strong> 基準測試</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch11/ch11-05.html" ><strong aria-hidden="true">11.5.</strong> 剖析</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch11/ch11-06.html" ><strong aria-hidden="true">11.6.</strong> 示例函數</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch12/ch12.html" ><strong aria-hidden="true">12.</strong> 反射</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch12/ch12-01.html" ><strong aria-hidden="true">12.1.</strong> 爲何需要反射?</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch12/ch12-02.html" ><strong aria-hidden="true">12.2.</strong> reflect.Type和reflect.Value</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch12/ch12-03.html" ><strong aria-hidden="true">12.3.</strong> Display遞歸打印</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch12/ch12-04.html" ><strong aria-hidden="true">12.4.</strong> 示例: 編碼S表達式</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch12/ch12-05.html" ><strong aria-hidden="true">12.5.</strong> 通過reflect.Value修改值</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch12/ch12-06.html" ><strong aria-hidden="true">12.6.</strong> 示例: 解碼S表達式</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch12/ch12-07.html" ><strong aria-hidden="true">12.7.</strong> 獲取結構體字段標籤</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch12/ch12-08.html" ><strong aria-hidden="true">12.8.</strong> 顯示一個類型的方法集</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch12/ch12-09.html" ><strong aria-hidden="true">12.9.</strong> 幾點忠告</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../ch13/ch13.html" ><strong aria-hidden="true">13.</strong> 底層編程</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../ch13/ch13-01.html" ><strong aria-hidden="true">13.1.</strong> unsafe.Sizeof, Alignof 和 Offsetof</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch13/ch13-02.html" ><strong aria-hidden="true">13.2.</strong> unsafe.Pointer</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch13/ch13-03.html" ><strong aria-hidden="true">13.3.</strong> 示例: 深度相等判斷</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch13/ch13-04.html" ><strong aria-hidden="true">13.4.</strong> 通過cgo調用C代碼</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../ch13/ch13-05.html" ><strong aria-hidden="true">13.5.</strong> 幾點忠告</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../appendix/appendix.html" ><strong aria-hidden="true">14.</strong> 附錄</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../appendix/appendix-a-errata.html" ><strong aria-hidden="true">14.1.</strong> 附錄A：原文勘誤</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../appendix/appendix-b-author.html" ><strong aria-hidden="true">14.2.</strong> 附錄B：作者譯者</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../appendix/appendix-c-cpoyright.html" ><strong aria-hidden="true">14.3.</strong> 附錄C：譯文授權</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../appendix/appendix-d-translations.html" ><strong aria-hidden="true">14.4.</strong> 附錄D：其它語言</a>
    </li>
  </ol>
</ol>

            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title"><a href="../index.html">Go語言聖經</a></h1>

                    <div class="right-buttons">
                        <a href="https://github.com/gopl-zh/gopl-zh.github.com" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/gopl-zh/gopl-zh.github.com/edit/master/ch7/ch7-06.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <!-- Page table of contents -->
                    <div class="sidetoc"><nav class="pagetoc"></nav></div>

                    <main>
                        <ul dir="auto"><li><em>凹語言(Go實現, 面向WASM設計): <a href="https://github.com/wa-lang/wa">https://github.com/wa-lang/wa</a></em></li><li><em>WaBook(Go語言實現的MD電子書構建工具): <a href="https://github.com/wa-lang/wabook">https://github.com/wa-lang/wabook</a></em></li></ul><hr>

                        <h2>7.6. sort.Interface接口</h2>
<p>排序操作和字符串格式化一樣是很多程序經常使用的操作。儘管一個最短的快排程序只要15行就可以搞定，但是一個健壯的實現需要更多的代碼，並且我們不希望每次我們需要的時候都重寫或者拷貝這些代碼。</p>
<p>幸運的是，sort包內置的提供了根據一些排序函數來對任何序列排序的功能。它的設計非常獨到。在很多語言中，排序算法都是和序列數據類型關聯，同時排序函數和具體類型元素關聯。相比之下，Go語言的sort.Sort函數不會對具體的序列和它的元素做任何假設。相反，它使用了一個接口類型sort.Interface來指定通用的排序算法和可能被排序到的序列類型之間的約定。這個接口的實現由序列的具體表示和它希望排序的元素決定，序列的表示經常是一個切片。</p>
<p>一個內置的排序算法需要知道三個東西：序列的長度，表示兩個元素比較的結果，一種交換兩個元素的方式；這就是sort.Interface的三個方法：</p>
<pre><code class="language-go">package sort

type Interface interface {
	Len() int
	Less(i, j int) bool // i, j are indices of sequence elements
	Swap(i, j int)
}
</code></pre>
<p>爲了對序列進行排序，我們需要定義一個實現了這三個方法的類型，然後對這個類型的一個實例應用sort.Sort函數。思考對一個字符串切片進行排序，這可能是最簡單的例子了。下面是這個新的類型StringSlice和它的Len，Less和Swap方法</p>
<pre><code class="language-go">type StringSlice []string
func (p StringSlice) Len() int           { return len(p) }
func (p StringSlice) Less(i, j int) bool { return p[i] &lt; p[j] }
func (p StringSlice) Swap(i, j int)      { p[i], p[j] = p[j], p[i] }
</code></pre>
<p>現在我們可以通過像下面這樣將一個切片轉換爲一個StringSlice類型來進行排序：</p>
<pre><code class="language-go">sort.Sort(StringSlice(names))
</code></pre>
<p>這個轉換得到一個相同長度，容量，和基於names數組的切片值；並且這個切片值的類型有三個排序需要的方法。</p>
<p>對字符串切片的排序是很常用的需要，所以sort包提供了StringSlice類型，也提供了Strings函數能讓上面這些調用簡化成sort.Strings(names)。</p>
<p>這裏用到的技術很容易適用到其它排序序列中，例如我們可以忽略大小寫或者含有的特殊字符。（本書使用Go程序對索引詞和頁碼進行排序也用到了這個技術，對羅馬數字做了額外邏輯處理。）對於更復雜的排序，我們使用相同的方法，但是會用更復雜的數據結構和更復雜地實現sort.Interface的方法。</p>
<p>我們會運行上面的例子來對一個表格中的音樂播放列表進行排序。每個track都是單獨的一行，每一列都是這個track的屬性像藝術家，標題，和運行時間。想象一個圖形用戶界面來呈現這個表格，並且點擊一個屬性的頂部會使這個列表按照這個屬性進行排序；再一次點擊相同屬性的頂部會進行逆向排序。讓我們看下每個點擊會發生什麼響應。</p>
<p>下面的變量tracks包含了一個播放列表。（One of the authors apologizes for the other author’s musical tastes.）每個元素都不是Track本身而是指向它的指針。儘管我們在下面的代碼中直接存儲Tracks也可以工作，sort函數會交換很多對元素，所以如果每個元素都是指針而不是Track類型會更快，指針是一個機器字碼長度而Track類型可能是八個或更多。</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->gopl.io/ch7/sorting<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<pre><code class="language-go">type Track struct {
	Title  string
	Artist string
	Album  string
	Year   int
	Length time.Duration
}

var tracks = []*Track{
	{&quot;Go&quot;, &quot;Delilah&quot;, &quot;From the Roots Up&quot;, 2012, length(&quot;3m38s&quot;)},
	{&quot;Go&quot;, &quot;Moby&quot;, &quot;Moby&quot;, 1992, length(&quot;3m37s&quot;)},
	{&quot;Go Ahead&quot;, &quot;Alicia Keys&quot;, &quot;As I Am&quot;, 2007, length(&quot;4m36s&quot;)},
	{&quot;Ready 2 Go&quot;, &quot;Martin Solveig&quot;, &quot;Smash&quot;, 2011, length(&quot;4m24s&quot;)},
}

func length(s string) time.Duration {
	d, err := time.ParseDuration(s)
	if err != nil {
		panic(s)
	}
	return d
}
</code></pre>
<p>printTracks函數將播放列表打印成一個表格。一個圖形化的展示可能會更好點，但是這個小程序使用text/tabwriter包來生成一個列整齊對齊和隔開的表格，像下面展示的這樣。注意到<code>*tabwriter.Writer</code>是滿足io.Writer接口的。它會收集每一片寫向它的數據；它的Flush方法會格式化整個表格並且將它寫向os.Stdout（標準輸出）。</p>
<pre><code class="language-go">func printTracks(tracks []*Track) {
	const format = &quot;%v\t%v\t%v\t%v\t%v\t\n&quot;
	tw := new(tabwriter.Writer).Init(os.Stdout, 0, 8, 2, ' ', 0)
	fmt.Fprintf(tw, format, &quot;Title&quot;, &quot;Artist&quot;, &quot;Album&quot;, &quot;Year&quot;, &quot;Length&quot;)
	fmt.Fprintf(tw, format, &quot;-----&quot;, &quot;------&quot;, &quot;-----&quot;, &quot;----&quot;, &quot;------&quot;)
	for _, t := range tracks {
		fmt.Fprintf(tw, format, t.Title, t.Artist, t.Album, t.Year, t.Length)
	}
	tw.Flush() // calculate column widths and print table
}
</code></pre>
<p>爲了能按照Artist字段對播放列表進行排序，我們會像對StringSlice那樣定義一個新的帶有必須的Len，Less和Swap方法的切片類型。</p>
<pre><code class="language-go">type byArtist []*Track
func (x byArtist) Len() int           { return len(x) }
func (x byArtist) Less(i, j int) bool { return x[i].Artist &lt; x[j].Artist }
func (x byArtist) Swap(i, j int)      { x[i], x[j] = x[j], x[i] }
</code></pre>
<p>爲了調用通用的排序程序，我們必須先將tracks轉換爲新的byArtist類型，它定義了具體的排序：</p>
<pre><code class="language-go">sort.Sort(byArtist(tracks))
</code></pre>
<p>在按照artist對這個切片進行排序後，printTrack的輸出如下</p>
<pre><code>Title       Artist          Album               Year Length
-----       ------          -----               ---- ------
Go Ahead    Alicia Keys     As I Am             2007 4m36s
Go          Delilah         From the Roots Up   2012 3m38s
Ready 2 Go  Martin Solveig  Smash               2011 4m24s
Go          Moby            Moby                1992 3m37s
</code></pre>
<p>如果用戶第二次請求“按照artist排序”，我們會對tracks進行逆向排序。然而我們不需要定義一個有顛倒Less方法的新類型byReverseArtist，因爲sort包中提供了Reverse函數將排序順序轉換成逆序。</p>
<pre><code class="language-go">sort.Sort(sort.Reverse(byArtist(tracks)))
</code></pre>
<p>在按照artist對這個切片進行逆向排序後，printTrack的輸出如下</p>
<pre><code>Title       Artist          Album               Year Length
-----       ------          -----               ---- ------
Go          Moby            Moby                1992 3m37s
Ready 2 Go  Martin Solveig  Smash               2011 4m24s
Go          Delilah         From the Roots Up   2012 3m38s
Go Ahead    Alicia Keys     As I Am             2007 4m36s
</code></pre>
<p>sort.Reverse函數值得進行更近一步的學習，因爲它使用了（§6.3）章中的組合，這是一個重要的思路。sort包定義了一個不公開的struct類型reverse，它嵌入了一個sort.Interface。reverse的Less方法調用了內嵌的sort.Interface值的Less方法，但是通過交換索引的方式使排序結果變成逆序。</p>
<pre><code class="language-go">package sort

type reverse struct{ Interface } // that is, sort.Interface

func (r reverse) Less(i, j int) bool { return r.Interface.Less(j, i) }

func Reverse(data Interface) Interface { return reverse{data} }
</code></pre>
<p>reverse的另外兩個方法Len和Swap隱式地由原有內嵌的sort.Interface提供。因爲reverse是一個不公開的類型，所以導出函數Reverse返回一個包含原有sort.Interface值的reverse類型實例。</p>
<p>爲了可以按照不同的列進行排序，我們必須定義一個新的類型例如byYear：</p>
<pre><code class="language-go">type byYear []*Track
func (x byYear) Len() int           { return len(x) }
func (x byYear) Less(i, j int) bool { return x[i].Year &lt; x[j].Year }
func (x byYear) Swap(i, j int)      { x[i], x[j] = x[j], x[i] }
</code></pre>
<p>在使用sort.Sort(byYear(tracks))按照年對tracks進行排序後，printTrack展示了一個按時間先後順序的列表：</p>
<pre><code>Title       Artist          Album               Year Length
-----       ------          -----               ---- ------
Go          Moby            Moby                1992 3m37s
Go Ahead    Alicia Keys     As I Am             2007 4m36s
Ready 2 Go  Martin Solveig  Smash               2011 4m24s
Go          Delilah         From the Roots Up   2012 3m38s
</code></pre>
<p>對於我們需要的每個切片元素類型和每個排序函數，我們需要定義一個新的sort.Interface實現。如你所見，Len和Swap方法對於所有的切片類型都有相同的定義。下個例子，具體的類型customSort會將一個切片和函數結合，使我們只需要寫比較函數就可以定義一個新的排序。順便說下，實現了sort.Interface的具體類型不一定是切片類型；customSort是一個結構體類型。</p>
<pre><code class="language-go">type customSort struct {
	t    []*Track
	less func(x, y *Track) bool
}

func (x customSort) Len() int           { return len(x.t) }
func (x customSort) Less(i, j int) bool { return x.less(x.t[i], x.t[j]) }
func (x customSort) Swap(i, j int)	{ x.t[i], x.t[j] = x.t[j], x.t[i] }
</code></pre>
<p>讓我們定義一個多層的排序函數，它主要的排序鍵是標題，第二個鍵是年，第三個鍵是運行時間Length。下面是該排序的調用，其中這個排序使用了匿名排序函數：</p>
<pre><code class="language-go">sort.Sort(customSort{tracks, func(x, y *Track) bool {
	if x.Title != y.Title {
		return x.Title &lt; y.Title
	}
	if x.Year != y.Year {
		return x.Year &lt; y.Year
	}
	if x.Length != y.Length {
		return x.Length &lt; y.Length
	}
	return false
}})
</code></pre>
<p>這下面是排序的結果。注意到兩個標題是“Go”的track按照標題排序是相同的順序，但是在按照year排序上更久的那個track優先。</p>
<pre><code>Title       Artist          Album               Year Length
-----       ------          -----               ---- ------
Go          Moby            Moby                1992 3m37s
Go          Delilah         From the Roots Up   2012 3m38s
Go Ahead    Alicia Keys     As I Am             2007 4m36s
Ready 2 Go  Martin Solveig  Smash               2011 4m24s
</code></pre>
<p>儘管對長度爲n的序列排序需要 O(n log n)次比較操作，檢查一個序列是否已經有序至少需要n-1次比較。sort包中的IsSorted函數幫我們做這樣的檢查。像sort.Sort一樣，它也使用sort.Interface對這個序列和它的排序函數進行抽象，但是它從不會調用Swap方法：這段代碼示範了IntsAreSorted和Ints函數在IntSlice類型上的使用：</p>
<pre><code class="language-go">values := []int{3, 1, 4, 1}
fmt.Println(sort.IntsAreSorted(values)) // &quot;false&quot;
sort.Ints(values)
fmt.Println(values)                     // &quot;[1 1 3 4]&quot;
fmt.Println(sort.IntsAreSorted(values)) // &quot;true&quot;
sort.Sort(sort.Reverse(sort.IntSlice(values)))
fmt.Println(values)                     // &quot;[4 3 1 1]&quot;
fmt.Println(sort.IntsAreSorted(values)) // &quot;false&quot;
</code></pre>
<p>爲了使用方便，sort包爲[]int、[]string和[]float64的正常排序提供了特定版本的函數和類型。對於其他類型，例如[]int64或者[]uint，儘管路徑也很簡單，還是依賴我們自己實現。</p>
<p><strong>練習 7.8：</strong> 很多圖形界面提供了一個有狀態的多重排序表格插件：主要的排序鍵是最近一次點擊過列頭的列，第二個排序鍵是第二最近點擊過列頭的列，等等。定義一個sort.Interface的實現用在這樣的表格中。比較這個實現方式和重複使用sort.Stable來排序的方式。</p>
<p><strong>練習 7.9：</strong> 使用html/template包（§4.6）替代printTracks將tracks展示成一個HTML表格。將這個解決方案用在前一個練習中，讓每次點擊一個列的頭部產生一個HTTP請求來排序這個表格。</p>
<p><strong>練習 7.10：</strong> sort.Interface類型也可以適用在其它地方。編寫一個IsPalindrome(s sort.Interface) bool函數表明序列s是否是迴文序列，換句話說反向排序不會改變這個序列。假設如果!s.Less(i, j) &amp;&amp; !s.Less(j, i)則索引i和j上的元素相等。</p>


                        <hr><table><tr><td><img width="222px" src="https://chai2010.cn/advanced-go-programming-book/css.png"></td><td><img width="222px" src="https://chai2010.cn/advanced-go-programming-book/cch.png"></td></tr></table>

                        
                            <div id="giscus-container"></div>
                        

                        
                            <footer class="page-footer">
                                <span>© 2015-2016 | <a href="https://github.com/gopl-zh"> Go語言聖經中文版</a>, 僅學習交流使用</span>
                            </footer>
                        
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../ch7/ch7-05.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                        
                            <!-- ../ch7/ch7-07.html -->
                            <a rel="next" href="../ch7/ch7-07.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../ch7/ch7-05.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                
                    <a rel="next" href="../ch7/ch7-07.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../static/wabook/mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../static/wabook/clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../static/wabook/highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../static/wabook/book.js" type="text/javascript" charset="utf-8"></script>
        
        <script type="text/javascript" charset="utf-8">
            var pagePath = "ch7/ch7-06.md"
        </script>

        <!-- Custom JS scripts -->
        
            <script src="../static/wabook/giscus.js" type="text/javascript" charset="utf-8"></script>
        

    </body>
</html>
